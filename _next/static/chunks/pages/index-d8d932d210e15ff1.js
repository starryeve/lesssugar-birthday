(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7528)}])},7528:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return B}});var i=n(5893),l=n(7294),t=n(6701),a=n(4959),c=n.n(a);let r=[{imgUrl:"/cake_modal.png",title:"做个蛋糕!",description:"嗯...既然是你的生日, 干脆来试一下自己做一个蛋糕？开始要制作面团，然后放入烤箱烘焙，最后涂上喜欢的奶油等等。大概就是这样，准备好了吗？",btnUrl:"准备好了，开始吧"},{imgUrl:"/mix_modal.png",title:"融合均匀!",description:"真不错，一点颗粒都看不到! 先去把烤箱预热下，你呢就歇一会儿。哦对了，因为是鼠标点击或者屏幕触摸，所以刚刚说的越大力越快是骗人的。\n下一步，把做好的面糊放入烤箱。",btnUrl:"预热好了，放进来"},{imgUrl:"/oven_modal.png",title:"烤焙完成!",description:"叮！时间到了，拿出来看一下吧。看到表面隆起一定高度又往下塌，说明就已经熟透了。晾一会儿，热气排空，接下来就可以往上涂奶油层了。",btnUrl:"拿出你的奶油枪"}],o=[{color:"#ffd296",name:"香草",type:"base"},{color:"#f74352c7",name:"糖果",type:"base"},{color:"#d5ccb2",name:"开心果",type:"base"}],d=[{color:"#ffffff",name:"奶油",type:"filling"},{color:"#e1dcff",name:"芋泥流心",type:"filling"},{color:"#9f3d28",name:"提拉米苏",type:"filling"},{color:"#ff99a3",name:"玫瑰千层",type:"filling"},{color:"#f7cb76",name:"芒果",type:"filling"}];var h=n(5675),m=n.n(h),x=n(6821),u=n.n(x);function j(e){let{imgUrl:s,title:n,content:l,btnText:t,onConfirm:a}=e;return(0,i.jsxs)("div",{className:u()["ls-modal"],children:[(0,i.jsx)("div",{className:"ls-modal__image",children:(0,i.jsx)(m(),{width:100,height:102,src:s,alt:n})}),(0,i.jsxs)("div",{className:"ls-modal__content",children:[(0,i.jsx)("h1",{children:n}),(0,i.jsx)("p",{children:l}),(0,i.jsx)("button",{onClick:a,children:t})]})]})}var g=n(6043),f=n.n(g);function p(e){let{children:s,className:n,style:l,onClick:t}=e;return(0,i.jsx)("button",{className:"".concat(f()["ls-button"]," ").concat(n),style:l,onClick:t,children:s})}function _(e){let{onStart:s}=e;return(0,i.jsxs)("div",{className:"birthday__stage stage1",children:[(0,i.jsx)(m(),{width:300,height:370,src:"/cake.png",alt:"Birth Cake"}),(0,i.jsx)(p,{className:"start",onClick:s,children:"来做个蛋糕吧！"})]})}function v(e){let{onMixWell:s}=e,[n,t]=(0,l.useState)(0),[a,c]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{5===n&&setTimeout(()=>{s()},1e3)},[n,s]),(0,i.jsxs)("div",{className:"birthday__stage stage2",children:[(0,i.jsx)("h1",{children:"打发搅拌"}),(0,i.jsx)("p",{children:"蛋黄、面粉、牛奶、色拉油、糖等等，都事先准备好，一起放到容器里了。搅拌工作交给你，看到下面那个按钮了吗？一直点点点（力气越大越好），应该很快就可以打散均匀了。"}),(0,i.jsxs)("div",{className:"mix",children:[(0,i.jsx)("div",{className:"mix__bowl",children:(0,i.jsx)(m(),{width:207,height:148,src:"/bowl.png",alt:"Mix Bowl"})}),(0,i.jsx)("div",{className:"mix__spoon",children:(0,i.jsx)(m(),{width:25,height:81,className:a?"mixing":"",src:"/spoon.png",alt:"Mix Spoon"})})]}),(0,i.jsx)(p,{className:"start",onClick:()=>{!a&&n<5&&(t(n+1),c(!0),setTimeout(()=>{c(!1)},1e3))},children:"用力点这儿！"})]})}var N=n(9294),b=n(9272);function y(e){let{onBaseBake:s}=e,[n,t]=(0,l.useState)(!1),[{isDragging:a},c,r]=(0,N.c)(()=>({type:"tin",collect:e=>({isDragging:!!e.isDragging()})})),[{isOver:o},d]=(0,b.L)(()=>({accept:"tin",drop:()=>s(),collect:e=>({isOver:!!e.isOver()})}));return(0,i.jsxs)("div",{className:"birthday__stage stage3",children:[(0,i.jsx)("h1",{children:"烘烤蛋糕胚"}),(0,i.jsx)("p",{children:"现在要把之前打好的面糊放到烤箱里. 找到下面那个模具了吗，长按把它拖到上面。速度要快，丢完手立刻伸开，小心别被烫到，烤箱的温度有150\xb0C呢！"}),(0,i.jsxs)("div",{className:o?"oven hover":"oven",children:[(0,i.jsx)(m(),{width:290,height:282,draggable:!1,src:"/oven.png",alt:"Oven"}),(0,i.jsx)("div",{className:"over-real",ref:d})]}),(0,i.jsx)("div",{className:"tin",ref:c,children:(0,i.jsx)(m(),{width:90,height:70,draggable:!1,src:"/tin.png",alt:"Tin"})})]})}function k(){let[e,s]=(0,l.useState)([]),[n,a]=(0,l.useState)([]),[c,r]=(0,l.useState)(!1);return(0,i.jsxs)("div",{className:"birthday__stage stage4",children:[(0,i.jsx)(t.Z,{in:!c,timeout:1e3,classNames:"fade",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"装饰点缀"}),(0,i.jsx)("p",{children:"按你喜欢的任何顺序涂上点缀，点击任意一种原料，就会层层叠加到蛋糕上。确保把你想吃的都加上了后，点一下底部的按钮，蜡烛就会出现，你的蛋糕就做好啦！"}),(0,i.jsx)(C,{bases:e,fillings:n,maxBaseCount:4,maxFillingCount:5,onBaseAdd:n=>{s([...e,n])},onFillingAdd:e=>{a([...n,e])}})]})}),(0,i.jsx)(w,{bases:e,fillings:n,finished:c}),!c&&(0,i.jsx)(p,{onClick:()=>{r(!0)},children:"点上蜡烛!"}),(0,i.jsxs)("div",{className:c?"hoping finished":"hoping",children:["生日快乐",(0,i.jsx)("br",{}),(0,i.jsxs)("p",{children:["一个人在一座陌生的城市有时候是会感觉心累...",(0,i.jsx)("br",{})," 接下来的日子坏运气都走开，去相信去遇见更多美好的人和事！"]})]}),c&&(0,i.jsx)("div",{className:"firework",children:(0,i.jsxs)("div",{className:"pyro",children:[(0,i.jsx)("div",{className:"before"}),(0,i.jsx)("div",{className:"after"})]})})]})}function C(e){let{bases:s,fillings:n,maxBaseCount:t,maxFillingCount:a,onBaseAdd:c,onFillingAdd:r}=e,[h,m]=(0,l.useState)("filling");return(0,i.jsxs)("div",{className:"season-paste",children:[(0,i.jsxs)("div",{className:"base"===h&&s.length<t?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"装饰"}),(0,i.jsxs)("h5",{children:[s.length," / ",t]})]}),(0,i.jsx)("div",{className:"options",children:o.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{c(e),m("filling")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]}),(0,i.jsxs)("div",{className:"filling"===h&&n.length<a?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"涂层/奶油"}),(0,i.jsxs)("h5",{children:[n.length," / ",a]})]}),(0,i.jsx)("div",{className:"options",children:d.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{r(e),m("base")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]})]})}function w(e){let{bases:s,fillings:n,finished:t}=e,[a,c]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=[],i=Math.max(s.length,n.length);for(let l=0;l<i;l++)l<n.length&&e.unshift(n[l]),l<s.length&&e.unshift(s[l]);c(e)},[s,n]),(0,i.jsxs)("div",{className:t?"cake finished":"cake",children:[(0,i.jsxs)("div",{className:t?"candle finished":"candle",children:[(0,i.jsx)(m(),{width:10,height:44,src:"/candle.png",alt:"Candle"}),(0,i.jsx)("div",{className:"frame"})]}),a.map((e,s)=>(0,i.jsx)("div",{className:e.type,style:{backgroundColor:e.color,width:200*(17-a.length+s)/17+"px"},children:"filling"===e.type?["","","","","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n)):["","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n))},e.name+s)),(0,i.jsx)("div",{className:"base",style:{backgroundColor:"#ffd296",width:"200px"}})]})}function B(){let[e,s]=(0,l.useState)(1),[n,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(r[0]),h=(0,l.useRef)(null),m=()=>{h.current&&h.current.play()};return(0,i.jsxs)("main",{className:c().birthday,children:[(0,i.jsx)("audio",{autoPlay:!0,ref:h,children:(0,i.jsx)("source",{src:"/bgm1.mp3",type:"audio/mpeg"})}),(0,i.jsx)(t.Z,{in:n,timeout:2e3,classNames:"scale",unmountOnExit:!0,children:(0,i.jsx)(j,{imgUrl:o.imgUrl,title:o.title,content:o.description,btnText:o.btnUrl,onConfirm:()=>{s(e=>e+1),a(!1)}})}),(0,i.jsx)(t.Z,{in:!n&&1===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(_,{onStart:()=>{console.log("onstart"),a(!0),m(),d(r[0])}})}),(0,i.jsx)(t.Z,{in:!n&&2===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(v,{onMixWell:()=>{console.log("onMixWell"),a(!0),d(r[1])}})}),(0,i.jsx)(t.Z,{in:!n&&3===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(y,{onBaseBake:()=>{console.log("onBaseBake"),a(!0),d(r[2])}})}),(0,i.jsx)(t.Z,{in:!n&&4===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(k,{})})]})}},6043:function(e){e.exports={"ls-button":"LSButton_ls-button__i1VBh"}},6821:function(e){e.exports={"ls-modal":"LSModal_ls-modal__7nS3c"}},4959:function(e){e.exports={birthday:"Birthday_birthday__CbFUT",bounce:"Birthday_bounce__xbTyn",moveup:"Birthday_moveup__ONt9g",in:"Birthday_in__BFhqz",mix:"Birthday_mix__R_28z",flicker:"Birthday_flicker__MB7tn"}}},function(e){e.O(0,[535,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);