(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7528)}])},7528:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return B}});var i=n(5893),t=n(7294),l=n(6701),a=n(4959),c=n.n(a);let o=[{imgUrl:"/cake_modal.png",title:"做个蛋糕!",description:"嗯...既然是你的生日, 干脆来试一下自己做一个蛋糕？开始要制作面团，然后放入烤箱烘焙，最后涂上喜欢的奶油等等。大概就是这样，准备好了吗？",btnUrl:"准备好了，开始吧！"},{imgUrl:"/mix_modal.png",title:"融合均匀!",description:"真不错, 一点颗粒都看不到! 先去帮你把烤箱预热下哈，打发面团蛮容易手酸的，稍微休息一会儿吧，哦对了，因为是鼠标点击或者屏幕触摸，所以刚刚说的越大力越快，是骗人的。\n下一步，把做好的面糊放入烤箱。",btnUrl:"预热好了，快拿过来！"},{imgUrl:"/oven_modal.png",title:"烤焙完成!",description:"叮！时间到了，拿出来看一下吧。要是表面隆起一定高度又往下塌，说明就已经熟透了。晾一会儿，热气排空，接下来就可以往上涂奶油层了。",btnUrl:"奶油奶油奶油！"}],r=[{color:"#ffd296",name:"香草",type:"base"},{color:"#ff99a3",name:"糖果",type:"base"},{color:"#d5ccb2",name:"水果",type:"base"}],d=[{color:"#e75656",name:"果酱",type:"filling"},{color:"#ffffff",name:"奶油",type:"filling"},{color:"#9f3d28",name:"巧克力",type:"filling"},{color:"#e8e086",name:"柠檬浆",type:"filling"}];var h=n(5675),m=n.n(h),x=n(6821),u=n.n(x);function g(e){let{imgUrl:s,title:n,content:t,btnText:l,onConfirm:a}=e;return(0,i.jsxs)("div",{className:u()["ls-modal"],children:[(0,i.jsx)("div",{className:"ls-modal__image",children:(0,i.jsx)(m(),{width:100,height:102,src:s,alt:n})}),(0,i.jsxs)("div",{className:"ls-modal__content",children:[(0,i.jsx)("h1",{children:n}),(0,i.jsx)("p",{children:t}),(0,i.jsx)("button",{onClick:a,children:l})]})]})}var j=n(6043),p=n.n(j);function f(e){let{children:s,className:n,style:t,onClick:l}=e;return(0,i.jsx)("button",{className:"".concat(p()["ls-button"]," ").concat(n),style:t,onClick:l,children:s})}function _(e){let{onStart:s}=e;return(0,i.jsxs)("div",{className:"birthday__stage stage1",children:[(0,i.jsx)(m(),{width:300,height:370,src:"/cake.png",alt:"Birth Cake"}),(0,i.jsx)(f,{className:"start",onClick:s,children:"生日快乐!"})]})}function v(e){let{onMixWell:s}=e,[n,l]=(0,t.useState)(0),[a,c]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{5===n&&setTimeout(()=>{s()},1e3)},[n,s]),(0,i.jsxs)("div",{className:"birthday__stage stage2",children:[(0,i.jsx)("h1",{children:"打发搅拌"}),(0,i.jsx)("p",{children:"蛋黄、面粉、牛奶、色拉油、糖啦等等，都给你事先准备好，一起放到容器里了。搅拌工作就交给你，下面有个按钮，用力点点点（力气越大越好），应该很快就可以打散均匀。"}),(0,i.jsxs)("div",{className:"mix",children:[(0,i.jsx)("div",{className:"mix__bowl",children:(0,i.jsx)(m(),{width:207,height:148,src:"/bowl.png",alt:"Mix Bowl"})}),(0,i.jsx)("div",{className:"mix__spoon",children:(0,i.jsx)(m(),{width:25,height:81,className:a?"mixing":"",src:"/spoon.png",alt:"Mix Spoon"})})]}),(0,i.jsx)(f,{className:"start",onClick:()=>{!a&&n<5&&(l(n+1),c(!0),setTimeout(()=>{c(!1)},1e3))},children:"点这儿搅拌!"})]})}var b=n(9294),N=n(9272);function y(e){let{onBaseBake:s}=e,[n,l]=(0,t.useState)(!1),[{isDragging:a},c,o]=(0,b.c)(()=>({type:"tin",collect:e=>({isDragging:!!e.isDragging()})})),[{isOver:r},d]=(0,N.L)(()=>({accept:"tin",drop:()=>s(),collect:e=>({isOver:!!e.isOver()})}));return(0,i.jsxs)("div",{className:"birthday__stage stage3",children:[(0,i.jsx)("h1",{children:"烘烤蛋糕胚"}),(0,i.jsx)("p",{children:"现在要把之前打好的面糊放到烤箱里. 看到下面那个模具了吗，把它拖到上面。速度要快，丢完手立刻伸开，小心别被烫到，蛋糕胚的烘焙温度有150\xb0C呢！"}),(0,i.jsxs)("div",{className:r?"oven hover":"oven",children:[(0,i.jsx)(m(),{width:290,height:282,draggable:!1,src:"/oven.png",alt:"Oven"}),(0,i.jsx)("div",{className:"over-real",ref:d})]}),(0,i.jsx)("div",{className:"tin",ref:c,children:(0,i.jsx)(m(),{width:90,height:70,draggable:!1,src:"/tin.png",alt:"Tin"})})]})}function k(){let[e,s]=(0,t.useState)([]),[n,a]=(0,t.useState)([]),[c,o]=(0,t.useState)(!1);return(0,i.jsxs)("div",{className:"birthday__stage stage4",children:[(0,i.jsx)(l.Z,{in:!c,timeout:1e3,classNames:"fade",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"装饰点缀"}),(0,i.jsx)("p",{children:"按你喜欢的任何顺序涂上点缀，点击任意一种原料，就会层层叠加到蛋糕上。一定一定要确保把你想吃的都加上了，之后点一下底部的按钮，蜡烛就会出现，你的蛋糕就做好啦！"}),(0,i.jsx)(C,{bases:e,fillings:n,maxBaseCount:4,maxFillingCount:5,onBaseAdd:n=>{s([...e,n])},onFillingAdd:e=>{a([...n,e])}})]})}),(0,i.jsx)(w,{bases:e,fillings:n,finished:c}),!c&&(0,i.jsx)(f,{onClick:()=>{o(!0)},children:"点上蜡烛!"})]})}function C(e){let{bases:s,fillings:n,maxBaseCount:l,maxFillingCount:a,onBaseAdd:c,onFillingAdd:o}=e,[h,m]=(0,t.useState)("filling");return(0,i.jsxs)("div",{className:"season-paste",children:[(0,i.jsxs)("div",{className:"base"===h&&s.length<l?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"底座"}),(0,i.jsxs)("h5",{children:[s.length," / ",l]})]}),(0,i.jsx)("div",{className:"options",children:r.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{c(e),m("filling")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]}),(0,i.jsxs)("div",{className:"filling"===h&&n.length<a?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"填充/奶油"}),(0,i.jsxs)("h5",{children:[n.length," / ",a]})]}),(0,i.jsx)("div",{className:"options",children:d.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{o(e),m("base")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]})]})}function w(e){let{bases:s,fillings:n,finished:l}=e,[a,c]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let e=[],i=Math.max(s.length,n.length);for(let t=0;t<i;t++)t<n.length&&e.unshift(n[t]),t<s.length&&e.unshift(s[t]);c(e)},[s,n]),(0,i.jsxs)("div",{className:l?"cake finished":"cake",children:[(0,i.jsx)("div",{className:l?"candle finished":"candle",children:(0,i.jsx)(m(),{width:10,height:44,src:"/candle.png",alt:"Candle"})}),a.map((e,s)=>(0,i.jsx)("div",{className:e.type,style:{backgroundColor:e.color,width:200*(17-a.length+s)/17+"px"},children:"filling"===e.type?["","","","","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n)):["","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n))},e.name+s)),(0,i.jsx)("div",{className:"base",style:{backgroundColor:"#ffd296",width:"200px"}})]})}function B(){let[e,s]=(0,t.useState)(1),[n,a]=(0,t.useState)(!1),[r,d]=(0,t.useState)(o[0]),h=(0,t.useRef)(),m=()=>{h.current&&h.current.play()};return setTimeout(()=>{var e;null===(e=document.getElementById("btn"))||void 0===e||e.click()},2e3),(0,i.jsxs)("main",{className:c().birthday,children:[(0,i.jsx)("button",{id:"btn",onClick:m,style:{position:"fixed",top:"100px",display:"none"},children:"Play"}),(0,i.jsx)("audio",{loop:!0,autoPlay:!0,ref:h,src:"/bgm1.mp3",onLoadedData:()=>{m()}}),(0,i.jsx)(l.Z,{in:n,timeout:2e3,classNames:"scale",unmountOnExit:!0,children:(0,i.jsx)(g,{imgUrl:r.imgUrl,title:r.title,content:r.description,btnText:r.btnUrl,onConfirm:()=>{s(e=>e+1),a(!1)}})}),(0,i.jsx)(l.Z,{in:!n&&1===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(_,{onStart:()=>{console.log("onstart"),a(!0),d(o[0])}})}),(0,i.jsx)(l.Z,{in:!n&&2===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(v,{onMixWell:()=>{console.log("onMixWell"),a(!0),d(o[1])}})}),(0,i.jsx)(l.Z,{in:!n&&3===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(y,{onBaseBake:()=>{console.log("onBaseBake"),a(!0),d(o[2])}})}),(0,i.jsx)(l.Z,{in:!n&&4===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(k,{})})]})}},6043:function(e){e.exports={"ls-button":"LSButton_ls-button__i1VBh"}},6821:function(e){e.exports={"ls-modal":"LSModal_ls-modal__7nS3c"}},4959:function(e){e.exports={birthday:"Birthday_birthday__CbFUT",bounce:"Birthday_bounce__xbTyn",moveup:"Birthday_moveup__ONt9g",in:"Birthday_in__BFhqz",mix:"Birthday_mix__R_28z"}}},function(e){e.O(0,[535,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);